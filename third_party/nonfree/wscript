def build(bld):
    if bld.is_asterix() or bld.is_obelix():
        if bld.is_asterix():
            paths = ['pebbleos-nonfree/npm1300/nrf_fuel_gauge/lib/cortex-m4/soft-float']
        elif bld.is_obelix():
            paths = ['pebbleos-nonfree/npm1300/nrf_fuel_gauge/lib/cortex-m33/soft-float']

        bld.read_stlib(
            'nrf_fuel_gauge',
            export_includes=[
                'pebbleos-nonfree/npm1300/nrf_fuel_gauge/include',
                'pebbleos-nonfree/npm1300/models'
            ],
            paths=paths
        )

    if bld.is_obelix():
        bld(
            name='cst816_fw',
            export_includes=[
                'pebbleos-nonfree/cst816',
            ],
        )
